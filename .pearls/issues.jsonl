{"id":"gsv-fa05","title":"1shots","status":"open","issue_type":"epic","priority":2,"created_at":"2026-02-09T08:03:50Z"}
{"id":"gsv-fa05.1","title":"Simplify install.sh: hardcode repo, remove dead schedule code, drop all sed","status":"implemented","issue_type":"bug","priority":2,"created_at":"2026-02-09T08:04:09Z","parent":"gsv-fa05","body":"## Context\n\nRunning `install.sh` on macOS fails with:\n```\nsed: 1: \".github/workflows/versi ...\": invalid command code .\n```\n\nBSD sed requires `sed -i ''` vs GNU sed's `sed -i`. But deeper analysis shows the sed calls are either dead code (schedule substitution against templates that don't have the placeholder) or unnecessary complexity (SEMVER_REPO param for hypothetical forks).\n\n## Acceptance Criteria\n\n### install.sh changes\n- [ ] Remove the `SEMVER_REPO` parameter \u2014 script takes only `<version>`\n- [ ] Remove all schedule/cron code (lines 52-70: read/validate, lines 88-91: sed substitute) \u2014 dead code, templates have no schedule placeholder\n- [ ] Remove all `sed` calls from `install_workflow()` \u2014 no substitution needed\n- [ ] Update usage comment and header to reflect single-param interface\n- [ ] `install_workflow()` just fetches the template, no post-processing\n\n### Template changes\n- [ ] `templates/github/workflows/install-git-semver.yml`: change `SEMVER_REPO: USER/git-semver` to `SEMVER_REPO: mangimangi/git-semver`\n\n### README changes\n- [ ] Remove `install.schedule` from config docs (line ~165, ~209)\n- [ ] Remove \"Runs weekly to check for updates\" mention (line ~28)\n- [ ] Simplify install command examples to `bash -s <version>` (drop repo param)\n\n### Workflow changes\n- [ ] Update `.github/workflows/install-git-semver.yml` (the repo's own workflow) to pass only version to install.sh (drop repo param from `bash -s` call)\n- [ ] Update `.github/workflows/install-on-release.yml` if it also passes repo param\n\n### Tests\n- [ ] Add `tests/test_install.sh` (shell tests) or `tests/test_install.py` (pytest) that verify:\n  - install.sh creates `.semver/git-semver`, `.semver/.version`, `.semver/config.json`\n  - install.sh installs workflow templates when not present\n  - install.sh skips workflow templates when already present\n  - Installed workflow templates contain `mangimangi/git-semver` (not placeholder)","references":[{"file":"install.sh"},{"file":"templates/github/workflows/install-git-semver.yml"},{"file":"README.md"}],"estimates":[{"estimator":"claude-opus-4-6","implementer":"claude-opus-4-6","cost":{"input":40000,"output":12000}}],"started_at":"2026-02-09T08:04:40Z","commit":"15db16c","implementer":"claude-opus-4-6","cost":{"input":55000,"output":15000},"implemented_at":"2026-02-09T08:08:34Z"}
{"id":"gsv-f58c","title":"git-vendored \u2014 Unified Vendor Management","status":"open","issue_type":"epic","priority":2,"created_at":"2026-02-09T08:51:54Z","body":"Unified vendor management system: git-vendored (install + protection) and git-dogfood (release-to-self-update bridge). Absorbs gsv-2697 (git-block). Planning doc: docs/planning/epics/gsv-2697.md","deps":[{"id":"gsv-2697","type":"duplicates"}]}
{"id":"gsv-f58c.1","title":".vendored/check \u2014 vendor file protection script","status":"closed","issue_type":"task","priority":2,"created_at":"2026-02-09T09:09:02Z","parent":"gsv-f58c","body":"The check script reads `.vendored/config.json` and validates that PRs don't modify protected vendor files. Absorbs the `check-pearls-impl.yml` logic into a config-driven, multi-vendor solution.\n\n## Acceptance Criteria\n\n- Script at `git-vendored/vendored/check` (extensionless, `#!/usr/bin/env python3`)\n- Reads `.vendored/config.json` for all vendor entries\n- For each vendor, skips checking if PR branch matches its `install_branch` prefix\n- For each changed file (from git diff), matches against `protected` glob patterns\n- If a protected file matches, checks against `allowed` glob patterns (pass if allowed)\n- Collects violations and reports with clear output per vendor\n- Exits non-zero if any violations found, zero if clean\n- Tests in `git-vendored/tests/test_check.py`\n\n## Design Notes\n\nConfig shape consumed:\n```json\n{\n  \"vendors\": {\n    \"<name>\": {\n      \"install_branch\": \"<branch-prefix>\",\n      \"protected\": [\"<glob>\", ...],\n      \"allowed\": [\"<glob>\", ...]\n    }\n  }\n}\n```\n\nChanged files come from git diff (the workflow handles checkout with fetch-depth: 0). Script should accept the base ref as an argument or default to the PR base.","deps":[{"id":"gsv-f58c.3","type":"blocks"}],"estimates":[{"estimator":"claude-opus-4-6","implementer":"claude-opus-4-6","cost":{"input":40000,"output":8000}}],"started_at":"2026-02-09T09:30:15Z","commit":"b4fc9a4","implementer":"claude-opus-4-6","cost":{"input":45000,"output":8000},"implemented_at":"2026-02-09T09:37:25Z","evaluation":{"evaluator":"claude-opus-4-6","evaluated_at":"2026-02-09T15:22:59Z","scores":{"correctness":90,"completeness":90,"quality":88,"testing":85,"documentation":85},"score":87.6},"closed_at":"2026-02-09T15:24:30Z"}
{"id":"gsv-f58c.2","title":".vendored/install \u2014 vendor install/update script","status":"closed","issue_type":"task","priority":2,"created_at":"2026-02-09T09:09:14Z","parent":"gsv-f58c","body":"The install script handles updating a vendor to a target version. Reads config, resolves versions, downloads and runs the vendor's install.sh, outputs structured results.\n\n## Acceptance Criteria\n\n- Script at `git-vendored/vendored/install` (extensionless, `#!/usr/bin/env python3`)\n- Accepts vendor name + optional version as arguments\n- Reads `.vendored/config.json` for vendor entry (repo, private flag)\n- Resolves target version: GitHub releases API, fallback to VERSION file on default branch\n- Checks if already at target version via vendor's `.version` file (skip if match)\n- Downloads vendor's `install.sh` from source repo at resolved version\n- Runs `install.sh` and captures output\n- Outputs structured result for PR creation: vendor name, old version, new version, changed files\n- Auth: `GITHUB_TOKEN` for public repos, `VENDOR_PAT` for private repos (`\"private\": true`)\n- Tests in `git-vendored/tests/test_install.py`\n\n## Design Notes\n\nConfig shape consumed:\n```json\n{\n  \"vendors\": {\n    \"<name>\": {\n      \"repo\": \"<owner/repo>\",\n      \"private\": false\n    }\n  }\n}\n```\n\nOutput format should be parseable by the workflow for PR title/body construction. Consider outputting key=value lines or JSON to stdout.","deps":[{"id":"gsv-f58c.3","type":"blocks"}],"estimates":[{"estimator":"claude-opus-4-6","implementer":"claude-opus-4-6","cost":{"input":55000,"output":10000}}],"started_at":"2026-02-09T09:37:34Z","commit":"f12b9b7","implementer":"claude-opus-4-6","cost":{"input":50000,"output":10000},"implemented_at":"2026-02-09T09:39:20Z","evaluation":{"evaluator":"claude-opus-4-6","evaluated_at":"2026-02-09T15:23:08Z","scores":{"correctness":88,"completeness":85,"quality":85,"testing":85,"documentation":85},"score":85.6},"closed_at":"2026-02-09T15:24:34Z"}
{"id":"gsv-f58c.3","title":"git-vendored/install.sh \u2014 bootstrap installer","status":"closed","issue_type":"task","priority":2,"created_at":"2026-02-09T09:09:30Z","parent":"gsv-f58c","body":"The bootstrap installer that sets up git-vendored in consumer repos. Creates the .vendored/ directory, copies scripts, manages config, and self-registers.\n\n## Acceptance Criteria\n\n- `git-vendored/install.sh` (bash script) that:\n  1. Creates `.vendored/` directory\n  2. Copies `install` and `check` scripts from source, makes executable\n  3. Writes `.vendored/.version` with installed version\n  4. Creates `.vendored/config.json` if missing (empty `{\"vendors\": {}}`)\n  5. Self-registers git-vendored as a vendor in `.vendored/config.json`\n- `git-vendored/templates/vendored/config.json` \u2014 default empty config template\n- `git-vendored/VERSION` \u2014 version file for git-vendored itself\n- Tests for the installer logic\n\n## Design Notes\n\nSelf-registration entry:\n```json\n{\n  \"git-vendored\": {\n    \"repo\": \"mangimangi/git-vendored\",\n    \"install_branch\": \"chore/install-git-vendored\",\n    \"protected\": [\".vendored/**\", \".github/workflows/install-vendored.yml\", \".github/workflows/check-vendor.yml\"],\n    \"allowed\": [\".vendored/config.json\", \".vendored/.version\"]\n  }\n}\n```\n\nThe installer should be idempotent \u2014 safe to re-run on update. Config is preserved, scripts are overwritten, workflows are NOT overwritten (install-once).","deps":[{"id":"gsv-f58c.1","type":"blocked_by"},{"id":"gsv-f58c.2","type":"blocked_by"},{"id":"gsv-f58c.4","type":"blocks"},{"id":"gsv-f58c.5","type":"blocks"}],"estimates":[{"estimator":"claude-opus-4-6","implementer":"claude-opus-4-6","cost":{"input":35000,"output":7000}}],"started_at":"2026-02-09T09:39:30Z","commit":"cb643ff","implementer":"claude-opus-4-6","cost":{"input":35000,"output":7000},"implemented_at":"2026-02-09T09:41:04Z","evaluation":{"evaluator":"claude-opus-4-6","evaluated_at":"2026-02-09T15:23:16Z","scores":{"correctness":88,"completeness":90,"quality":85,"testing":82,"documentation":80},"score":85.0},"closed_at":"2026-02-09T15:24:39Z"}
{"id":"gsv-f58c.4","title":"git-vendored workflow templates","status":"implemented","issue_type":"task","priority":2,"created_at":"2026-02-09T09:09:46Z","parent":"gsv-f58c","body":"Thin workflow templates for install-vendored and check-vendor. These are install-once files \u2014 the installer copies them on first install but never overwrites.\n\n## Acceptance Criteria\n\n### install-vendored.yml\n- Path: `git-vendored/templates/github/workflows/install-vendored.yml`\n- Triggers: schedule (weekly cron), workflow_dispatch (vendor + version inputs), workflow_call (for dogfood callers, with optional token secret)\n- Steps: checkout, run `.vendored/install` with inputs, create PR from output (branch, commit, PR title/body)\n- Respects `automerge` config per vendor\n- Single workflow handles all vendors \u2014 no per-vendor workflow files\n\n### check-vendor.yml\n- Path: `git-vendored/templates/github/workflows/check-vendor.yml`\n- Triggers: pull_request\n- Steps: checkout (fetch-depth: 0), run `.vendored/check`\n- Simple pass/fail \u2014 all logic in the vendored script\n\n### install.sh update\n- `git-vendored/install.sh` installs these templates on first install only (skip if files already exist)\n\n## Design Notes\n\nWorkflow inputs for install-vendored.yml:\n```yaml\nworkflow_dispatch:\n  inputs:\n    vendor: {description: 'Vendor to update (or \"all\")', default: 'all'}\n    version: {description: 'Version to install', default: 'latest'}\nworkflow_call:\n  inputs:\n    vendor: {type: string, required: true}\n    version: {type: string, default: 'latest'}\n  secrets:\n    token: {required: false}\n```\n\nAuth: GITHUB_TOKEN for public vendors, VENDOR_PAT secret for private vendors. PR creation uses GITHUB_TOKEN.","deps":[{"id":"gsv-f58c.3","type":"blocked_by"},{"id":"gsv-f58c.6","type":"blocks"},{"id":"gsv-f58c.10","type":"causes"}],"estimates":[{"estimator":"claude-opus-4-6","implementer":"claude-opus-4-6","cost":{"input":35000,"output":8000}}],"started_at":"2026-02-09T09:41:12Z","commit":"36b9d1a","implementer":"claude-opus-4-6","cost":{"input":30000,"output":6000},"implemented_at":"2026-02-09T09:42:01Z","evaluation":{"evaluator":"claude-opus-4-6","evaluated_at":"2026-02-09T18:09:13Z","scores":{"correctness":88,"completeness":82,"quality":85,"testing":55,"documentation":80},"score":78.0}}
{"id":"gsv-f58c.5","title":"git-dogfood \u2014 resolve script, installer, and workflow","status":"closed","issue_type":"task","priority":2,"created_at":"2026-02-09T09:10:03Z","parent":"gsv-f58c","body":"All of git-dogfood: the resolve script that bridges release events to vendor updates, its bootstrap installer, and the thin workflow template.\n\n## Acceptance Criteria\n\n### .dogfood/resolve script\n- Path: `git-dogfood/dogfood/resolve` (extensionless, `#!/usr/bin/env python3`)\n- Reads `.vendored/config.json`\n- Finds the vendor entry with `\"dogfood\": true`\n- Outputs `vendor=<name>` in GITHUB_OUTPUT format\n- Errors clearly if no dogfood vendor found or if config is missing\n- Tests in `git-dogfood/tests/test_resolve.py`\n\n### git-dogfood/install.sh\n- Creates `.dogfood/` directory\n- Copies `resolve` script, makes executable\n- Writes `.dogfood/.version`\n- Installs `dogfood.yml` workflow (first install only, skip if present)\n- Registers git-dogfood in `.vendored/config.json` if present\n\n### dogfood.yml workflow template\n- Path: `git-dogfood/templates/github/workflows/dogfood.yml`\n- Triggers: `workflow_run` after Release workflow completes\n- Job 1 (resolve): checkout, run `.dogfood/resolve`, capture vendor output\n- Job 2 (install): calls `.github/workflows/install-vendored.yml` with vendor + version: latest\n- Skips if release workflow failed\n\n### Other\n- `git-dogfood/VERSION` \u2014 version file\n\n## Design Notes\n\nSelf-registration entry for `.vendored/config.json`:\n```json\n{\n  \"git-dogfood\": {\n    \"repo\": \"mangimangi/git-dogfood\",\n    \"install_branch\": \"chore/install-git-dogfood\",\n    \"protected\": [\".dogfood/**\", \".github/workflows/dogfood.yml\"],\n    \"allowed\": [\".dogfood/.version\"]\n  }\n}\n```\n\nDependencies: requires git-vendored installed first (needs `.vendored/config.json` and `install-vendored.yml`).","deps":[{"id":"gsv-f58c.3","type":"blocked_by"},{"id":"gsv-f58c.6","type":"blocks"}],"estimates":[{"estimator":"claude-opus-4-6","implementer":"claude-opus-4-6","cost":{"input":50000,"output":12000}}],"started_at":"2026-02-09T14:24:25Z","commit":"13b5a3e","implementer":"claude-opus-4-6","cost":{"input":50000,"output":10000},"implemented_at":"2026-02-09T14:31:09Z","evaluation":{"evaluator":"claude-opus-4-6","evaluated_at":"2026-02-09T15:23:33Z","scores":{"correctness":88,"completeness":90,"quality":87,"testing":80,"documentation":80},"score":85.0},"closed_at":"2026-02-09T15:24:45Z"}
{"id":"gsv-f58c.6","title":"Migration \u2014 install to this repo, remove old workflows","status":"implemented","issue_type":"task","priority":2,"created_at":"2026-02-09T09:10:20Z","parent":"gsv-f58c","body":"Install git-vendored and git-dogfood to the git-semver repo, register all vendors, update git-semver's install.sh with the registration pattern, and remove old per-vendor workflows.\n\n## Acceptance Criteria\n\n### Install git-vendored\n- Run `git-vendored/install.sh` against this repo\n- Creates `.vendored/`, `.vendored/install`, `.vendored/check`, `.vendored/.version`, `.vendored/config.json`\n- Creates `.github/workflows/install-vendored.yml` and `.github/workflows/check-vendor.yml`\n\n### Register vendors in .vendored/config.json\n- git-vendored (self-registered by installer)\n- git-semver: repo mangimangi/git-semver, dogfood: true, protected .semver/**, allowed .semver/config.json + .semver/.version\n- pearls: repo mangimangi/pearls, private: true, automerge: true, protected .pearls/**, allowed .pearls/issues.jsonl + .pearls/config.json + .pearls/.prl-version + .pearls/archive/*.jsonl\n- git-dogfood (registered by its installer)\n\n### Install git-dogfood\n- Run `git-dogfood/install.sh` against this repo\n- Creates `.dogfood/`, `.dogfood/resolve`, `.dogfood/.version`\n- Creates `.github/workflows/dogfood.yml`\n\n### Update git-semver install.sh\n- Add the vendor registration pattern: if `.vendored/config.json` exists, register git-semver with its protected/allowed patterns\n\n### Remove old workflows\n- Delete `.github/workflows/install-pearls.yml`\n- Delete `.github/workflows/install-git-semver.yml`\n- Delete `.github/workflows/check-pearls-impl.yml`\n- Delete `.github/workflows/install-on-release.yml`\n\n## Design Notes\n\nInstall order matters: git-vendored first, then git-semver registration, then git-dogfood.\n\nThe registration pattern for git-semver's install.sh:\n```bash\nif [ -f .vendored/config.json ]; then\n    python3 -c \"\nimport json\nwith open('.vendored/config.json') as f:\n    config = json.load(f)\nconfig.setdefault('vendors', {})\nconfig['vendors']['git-semver'] = {\n    'repo': 'mangimangi/git-semver',\n    'install_branch': 'chore/install-git-semver',\n    'dogfood': True,\n    'protected': ['.semver/**'],\n    'allowed': ['.semver/config.json', '.semver/.version']\n}\nwith open('.vendored/config.json', 'w') as f:\n    json.dump(config, f, indent=2)\n    f.write('\\n')\n\"\nfi\n```","deps":[{"id":"gsv-f58c.4","type":"blocked_by"},{"id":"gsv-f58c.5","type":"blocked_by"},{"id":"gsv-f58c.7","type":"blocks"},{"id":"gsv-f58c.8","type":"causes"}],"estimates":[{"estimator":"claude-opus-4-6","implementer":"claude-opus-4-6","cost":{"input":30000,"output":5000}}],"started_at":"2026-02-09T14:26:23Z","commit":"13b5a3e","implementer":"claude-opus-4-6","cost":{"input":50000,"output":10000},"implemented_at":"2026-02-09T14:31:09Z","evaluation":{"evaluator":"claude-opus-4-6","evaluated_at":"2026-02-09T18:09:33Z","scores":{"correctness":80,"completeness":78,"quality":78,"testing":55,"documentation":70},"score":72.2}}
{"id":"gsv-f58c.7","title":"Docs audit \u2014 top-to-bottom review for vendor management","status":"implemented","issue_type":"chore","priority":2,"created_at":"2026-02-09T09:10:34Z","parent":"gsv-f58c","body":"Top-to-bottom documentation review after git-vendored and git-dogfood are installed. Update README, templates, and any other docs to reflect the new unified vendor management system.\n\n## Acceptance Criteria\n\n### README.md updates\n- Update \"GitHub Actions\" section: replace per-vendor workflow descriptions with install-vendored.yml, check-vendor.yml, dogfood.yml\n- Update \"File Classification\" table: add .vendored/ and .dogfood/ files with edit/no-edit guidance\n- Update \"Installation\" section if install.sh behavior changed (vendor registration)\n- Update \"Commit Message Conventions\" if new prefixes are used\n- Remove references to deleted workflows (install-pearls.yml, check-pearls-impl.yml, install-on-release.yml)\n\n### templates/AGENTS.md\n- Review and update if it references old workflow names or patterns\n\n### Epic doc\n- Mark docs/planning/epics/gsv-f58c.md as implemented or add completion notes\n\n### General\n- Ensure no stale references to removed workflows anywhere in the repo\n- Verify config examples in README match actual config schema","deps":[{"id":"gsv-f58c.6","type":"blocked_by"},{"id":"gsv-f58c.9","type":"causes"},{"id":"gsv-f58c.11","type":"causes"}],"estimates":[{"estimator":"claude-opus-4-6","implementer":"claude-opus-4-6","cost":{"input":30000,"output":6000}}],"started_at":"2026-02-09T14:29:17Z","commit":"13b5a3e","implementer":"claude-opus-4-6","cost":{"input":50000,"output":10000},"implemented_at":"2026-02-09T14:31:09Z","evaluation":{"evaluator":"claude-opus-4-6","evaluated_at":"2026-02-09T18:09:53Z","scores":{"correctness":82,"completeness":72,"quality":80,"testing":65,"documentation":82},"score":76.2}}
{"id":"gsv-f58c.8","title":"install.sh vendor registration missing dogfood: True","status":"implemented","issue_type":"bug","priority":2,"created_at":"2026-02-09T15:24:00Z","parent":"gsv-f58c","references":[{"file":"install.sh","lines":["75-80"]},{"commit":"13b5a3e"}],"deps":[{"id":"gsv-f58c.6","type":"caused_by"}],"started_at":"2026-02-09T17:51:00Z","commit":"8ddd7a5","implementer":"claude-opus-4-6","cost":{"input":45000,"output":3000},"implemented_at":"2026-02-09T17:51:21Z","evaluation":{"evaluator":"claude-opus-4-6","evaluated_at":"2026-02-09T18:10:10Z","scores":{"correctness":95,"completeness":95,"quality":92,"testing":50,"documentation":75},"score":81.4}}
{"id":"gsv-f58c.9","title":"Epic planning doc not marked as implemented","status":"closed","issue_type":"bug","priority":2,"created_at":"2026-02-09T15:24:08Z","parent":"gsv-f58c","references":[{"file":"docs/planning/epics/gsv-f58c.md"},{"commit":"13b5a3e"}],"deps":[{"id":"gsv-f58c.7","type":"caused_by"}],"closed_at":"2026-02-09T15:26:41Z"}
{"id":"gsv-f58c.10","title":"install-vendored.yml 'all' mode output parsing broken","status":"implemented","issue_type":"bug","priority":2,"created_at":"2026-02-09T15:24:17Z","parent":"gsv-f58c","references":[{"file":"git-vendored/templates/github/workflows/install-vendored.yml","lines":["72-85"]},{"commit":"36b9d1a"}],"deps":[{"id":"gsv-f58c.4","type":"caused_by"},{"id":"gsv-f58c.12","type":"causes"}],"started_at":"2026-02-09T17:51:29Z","commit":"c688c5c","implementer":"claude-opus-4-6","cost":{"input":60000,"output":8000},"implemented_at":"2026-02-09T17:53:29Z","evaluation":{"evaluator":"claude-opus-4-6","evaluated_at":"2026-02-09T18:10:31Z","scores":{"correctness":85,"completeness":82,"quality":78,"testing":40,"documentation":75},"score":72.0}}
{"id":"gsv-f58c.11","title":"Delete stale epic planning doc docs/planning/epics/gsv-f58c.md","status":"closed","issue_type":"bug","priority":2,"created_at":"2026-02-09T15:26:49Z","parent":"gsv-f58c","references":[{"file":"docs/planning/epics/gsv-f58c.md"},{"commit":"13b5a3e"}],"deps":[{"id":"gsv-f58c.7","type":"caused_by"}],"started_at":"2026-02-09T17:53:35Z","commit":"aeda474","implementer":"claude-opus-4-6","cost":{"input":5000,"output":1000},"implemented_at":"2026-02-09T17:53:47Z","evaluation":{"evaluator":"claude-opus-4-6","evaluated_at":"2026-02-09T18:10:56Z","scores":{"correctness":95,"completeness":95,"quality":95,"testing":85,"documentation":82},"score":90.4},"closed_at":"2026-02-09T18:11:04Z"}
{"id":"gsv-f58c.12","title":"PR body has leading whitespace in install-vendored.yml template","status":"open","issue_type":"bug","priority":2,"created_at":"2026-02-09T18:10:40Z","parent":"gsv-f58c","references":[{"file":"git-vendored/templates/github/workflows/install-vendored.yml","lines":["119-121","133-135"]},{"commit":"c688c5c"}],"deps":[{"id":"gsv-f58c.10","type":"caused_by"}]}
